<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>InvitaciÃ³n | Steve & Tatiana</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{
  --azul:#1e3a8a;
  --azul-claro:#eaf2ff;
  --dorado:#d4af37;
  --texto:#1e3a8a;
}
body{margin:0;font-family:'Montserrat',sans-serif;background:linear-gradient(180deg,#f8fbff,#e8f0ff);color:var(--texto);transition:.6s;}
body.noche{background:linear-gradient(180deg,#0b1d3a,#102a56);color:#e5edff;}
.container{max-width:900px;margin:auto;padding:40px 20px;text-align:center;}
.card{background:white;border-radius:20px;padding:50px 30px;box-shadow:0 30px 60px rgba(0,0,0,.15);animation:fade 1.2s ease;position:relative;overflow:hidden;}
body.noche .card{background:#0f2547;}
@keyframes fade{from{opacity:0;transform:translateY(20px)}to{opacity:1}}
h1,h2{font-family:'Playfair Display',serif;}
h1{font-size:3rem;margin:10px 0;}
.divider{width:120px;height:2px;background:var(--azul);margin:25px auto;}
.details{line-height:1.8;}
.btn{display:inline-block;margin:15px;padding:14px 30px;background:var(--azul);color:white;border-radius:30px;text-decoration:none;font-weight:600;box-shadow:0 10px 20px rgba(30,58,138,.35);transition: transform 0.2s;}
.btn:hover{transform:translateY(-2px);}
.btn.waze{background:#2bb8ff;box-shadow:0 10px 20px rgba(43,184,255,.35);}
.countdown{display:flex;justify-content:center;gap:20px;margin-top:30px;}
.time-box{background:var(--azul-claro);padding:15px 20px;border-radius:12px;min-width:80px;}
.time-box span{display:block;font-size:1.8rem;font-weight:600;color:var(--azul);}
body.noche .time-box span{color:#e5edff;}
.sello{position:absolute;top:20px;right:20px;width:75px;height:75px;border-radius:50%;border:2px solid var(--dorado);display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:1.2rem;color:var(--dorado);box-shadow:0 0 15px rgba(212,175,55,.5);}
footer{margin-top:40px;font-size:.9rem;}
</style>
</head>
<body>

<audio autoplay loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5f0b5d8c1b.mp3" type="audio/mpeg">
</audio>

<div class="container">
<div class="card">
<div class="sello">S & T</div>
<p>Con la bendiciÃ³n de Dios y de nuestros padres</p>
<h1>Steve & Tatiana</h1>
<div class="divider"></div>
<p class="details">Tenemos el honor de invitarles a celebrar nuestra boda</p>
<h2 id="guest-name"></h2>
<p class="details">ðŸ“… 28 de marzo de 2026<br>â›ª Ceremonia: 3:00 p.m.<br>ðŸ¥‚ RecepciÃ³n: 5:30 p.m.</p>
<h2>Lugar</h2>
<p class="details">Finca Los Pinares</p>
<a class="btn" target="_blank" href="https://www.google.com/maps/dir/?api=1&destination=Finca+Los+Pinares+Apaneca">Google Maps</a>
<a class="btn waze" target="_blank" href="https://waze.com/ul?q=Finca%20Los%20Pinares%20Apaneca">Waze</a>

<div class="countdown">
<div class="time-box"><span id="days">0</span>DÃ­as</div>
<div class="time-box"><span id="hours">0</span>Horas</div>
<div class="time-box"><span id="minutes">0</span>Min</div>
<div class="time-box"><span id="seconds">0</span>Seg</div>
</div>

<a id="wa-btn" class="btn" target="_blank">Confirmar asistencia</a>
<footer>CÃ³digo de vestimenta: Formal</footer>
<p style="margin-top:30px">Con cariÃ±o,<br><strong>Steve & Tatiana</strong></p>
</div>
</div>

<script>
// Tema dÃ­a/noche
const hour = new Date().getHours();
if(hour>=18||hour<6) document.body.classList.add('noche');

// Cuenta regresiva con fondo sÃ³lido
const weddingDate = new Date("2026-03-28T15:00:00").getTime();
setInterval(()=>{
  const now = Date.now();
  let diff = weddingDate-now;
  if(diff<0) diff=0;
  document.getElementById('days').textContent = Math.floor(diff/86400000);
  document.getElementById('hours').textContent = Math.floor((diff%86400000)/3600000);
  document.getElementById('minutes').textContent = Math.floor((diff%3600000)/60000);
  document.getElementById('seconds').textContent = Math.floor((diff%60000)/1000);
},1000);

// PersonalizaciÃ³n + registro en Sheet
document.addEventListener("DOMContentLoaded",()=>{
  const params = new URLSearchParams(location.search);
  const guest = decodeURIComponent(params.get("guest")||"Invitado especial");
  const token = params.get("token")||"";
  document.getElementById("guest-name").textContent = `Con cariÃ±o para ${guest}`;

  const WEBHOOK="https://script.google.com/macros/s/AKfycbyc9k1ynOGTQzbNrNNq4IllL6wyCJbwJ1mYAtHBJbqTPg_kHWJMbXKwLcBEC_xKZUOlXQ/exec"; // reemplaza por tu Web App URL

  // Registrar apertura
  if(token){
    fetch(WEBHOOK,{method:"POST",body:JSON.stringify({action:"open",guest,token,ua:navigator.userAgent})});
  }

  // ConfirmaciÃ³n
  const waBtn=document.getElementById("wa-btn");
  const waLink=`https://wa.me/50370689702?text=${encodeURIComponent(
    `Estimados ${guest},\n\nCon mucha alegrÃ­a les invitamos a celebrar nuestra boda.\nAgradeceremos confirmar su asistencia por este medio.\n\nCon cariÃ±o,\nSteve & Tatiana`
  )}`;
  let clicked=false;
  waBtn.addEventListener("click",e=>{
    e.preventDefault();
    if(clicked) return;
    clicked=true;

    if(token){
      fetch(WEBHOOK,{method:"POST",body:JSON.stringify({action:"confirm",guest,token,ua:navigator.userAgent})});
    }

    waBtn.textContent="Asistencia confirmada âœ…";
    waBtn.style.pointerEvents="none";

    setTimeout(()=>{window.location.href=waLink;},600);
  });
});
</script>
</body>
</html>























